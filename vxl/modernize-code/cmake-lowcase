#!/bin/sh
# For getting projects to the new Cmake lowcase style
# Taken from vxl git log

# current usage: cmake-lowcase from the desired folder, it will do all
# subfolders


cmake --help-command-list \
 | grep -v "cmake version" \
 | while read c; do
     echo 's/\b'"$(echo $c | gtr '[:lower:]' '[:upper:]')"'\(\s*\)(/'"$c"'\1(/g'
   done >convert.sed \
 && find . -name '*.cmake' -o -name '*.cmake.in' -o -name '*CMakeLists.txt' \
 | xargs -0 gsed -i -f convert.sed \
 && rm convert.sed

## cmake --help-command-list \
##  | grep -v "cmake version" \
##  | while read c; do
##      echo 's/\b'"$(echo $c | gtr '[:lower:]' '[:upper:]')"'\(\s*\)(/'"$c"'\1(/g'
##    done >convert.sed \
## # && git ls-files -z -- bootstrap '*.cmake' '*.cmake.in' '*CMakeLists.txt' \
##  | xargs -0 gsed -i -f convert.sed \
##  && rm convert.sed
