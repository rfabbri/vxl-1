#!/bin/sh
#
# Utility for performing edge detection on images.

# 1) adapt these commands and run:
ln -s $HOME/cprg/vxlprg/lemsvpe/lemsvxl-bin/brcv/rec/dborl/algo/edge/dborl_edge_third_order ~/bin
ln -s $HOME/cprg/vxlprg/lemsvpe/lemsvxl-bin/brcv/rec/dborl/algo/edge/dborl_edge_third_order-input.xml ~/bin
# 
# 2) edit ~/bin/dborl_edge_third_order-input.xml with your parameters
#
# 3) run per usage message below

vorlexecname=dborl_edge_third_order
vorldirname=$HOME/bin/$vorlexecname
xmlorig="$HOME/bin/mw-scripts/$vorlexecname-input.xml"

# set -x
case $# in
  0) echo "Usage: $0 [image_filename]" 1>&2; exit 2
esac

img_ext=`echo $1|grep -o '\.[^\.]*$'`
img_base="${1%$img_ext}"
img_dir=`dirname $1`


echo image extension: $img_ext
echo image base: $img_base

tmpfile=/tmp/$$-tmp-$vorlexecname-input.xml

sed "s%@IMGEXT@%$img_ext%g
s%@IMGBASENAME@%$img_base%g
s%@INPUTDIR@%$img_dir%g
s%@OUTPUTDIR@%$img_dir%g" $xmlorig  > $tmpfile

$vorldirname -x $tmpfile
