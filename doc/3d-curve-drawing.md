# 3D Curve Sketch and Drawing System


## Hacking / Compiling / Building

- Read the [README](../README.md) for LEMSVPE carefully. It explains the setup,
and also lists a website for VXL-related compilation specific for our project
from Ricardo Fabbri (http://wiki.nosdigitais.teia.org.br/VXL)

## Code location

### 3D Curve Sketch

`vxd/contrib/brld/bmvgd/bmcsd/cmd`

Read vxd/contrib/brld/bmvgd/bmcsd/README.md
Update that bmcsd/README.md with public info, leave most private info to this file.

### 3D Curve Drawing

The code has been put into git at:

`lemsvpe/lemsvxl/contrib/rfabbri/mw/app/matlab/3d-drawing`

Some info can be found in:

lemsvpe/3d-drawing (ric, some notes)

Hongyi's drive with Anil's files for 3D Drawing. Matlab code is `Anil_3DDrawing`
https://drive.google.com/drive/folders/1p_Cp0y2FmivoVsyvWPv-0zo3YUaak4YS

I will refer to this as 3d-drawing-drive-folder

Meeting with anil recorded Oct'22: https://drive.google.com/file/d/1cnQUdt1g60lMwF9zhjRR8kE43v0rvvml

Dat files for 3D drawing: https://drive.google.com/drive/folders/1wux89jbcT8d20pZqJTwTqbTm8l8LMdqh?usp=sharing
Chiang-Heng:
"I found the .dat files required as the inputs of Anil's matlab code in the SSD disk of the workstation (they are actually not stored under a folder named /paper-runs/). 

Since the size of each dataset is pretty big, it will take a long time to upload all of them to my Google drive. So right now I upload only a partial of them on my google drive here and see whether Dr. Anil can help confirm that these are the files for the matlab code. (The .dat files I uploaded are under either /pavilion-midday-half/out-enhanced/4/4/crvs/*.dat or /pavilion-midday-half/out/40/crvs/*.dat) 
"

Anil:
"These .dat files are generated by the curve sketch, or the enhanced curve sketch. Ricardo is much more knowledgeable about these than I do - I was simply following his file formats when I was writing the outputs for enhanced curve sketch."

Chiang-Heng: 
I guess the .dat files in /pavilion-midday-half/out-enhanced/4/4/crvs/*.dat were generated from the enhanced curve sketch while those in /pavilion-midday-half/out/40/crvs/*.dat were generated from the curve sketch, as the number of .dat files from the former is way less than the ones from the latter.

Anil:
 the folders with numerical names (such as /4/4/ or /40/) are supposed to indicate the image indices of the first anchor view and second anchor view that were used to construct the curves in that folder. Enhanced curve sketch makes a distinction between first and second anchor views, and the reconstructions are anchored to the curve structure in the first anchor view, hence the single number I think.


#### 3D Drawing Step 1

The main matlab file to execute is

`average_curves_final_6.m`

Edit it and change the path to the file.

Make sure to download both the code .zip and the above data link.


### Visualizing

Matlab: 

`show_Anil_curve_drawing_result`

Meshlab visualizer:


#### Visualizing without running (precoumputed)

in 3d-drawing-drive-folder curve_graph_amsterdam.mat

You can open that .mat file and visualize it using the another attached matlab script show_Anil_curve_drawing_result.m. Looks like there are many small fragmented curves which can be simply pruned by curve length thresholding. While waiting for the code running from scratch on this dataset, try on this 3D curve drawing result first.A-- Chiang-Heng jul 2022

In `show_Anil_curve_drawing.m`, modify the line yy = load.. to contain each
differetn .mat file.

Here is a summary of each .mat file:
TODO: biao



## Datasets
The input datasets where we are doing 3D rec for the 3D Curve Drawings CVPR'10 paper have *-mcs-work suffix.
You can download them at:
- 3D Curve Sketch dataset recovered by Hongyi: 
    - https://drive.google.com/drive/folders/0ByTILAQRKQoLMHpmRTBWWlhpTTQ
    - seems to be part of what was used for the 3D curve drawing paper

## Presentation on reviving the code
doc/3d-code-efforts.key
This is updated to: https://docs.google.com/presentation/d/1v6S7F-9oL92CpOHQlcLdq8eL13A_PrQiXaCyId27LVs
